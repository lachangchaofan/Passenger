{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","js/aero.js","js/global.js","js/load.js","js/ship.js","js/tools.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","init","imgs","frameFn","num","ship","createBg","createShip","shipCrashAero","aero","createAero","requestAnimationFrame","global","tool","load","resizeCanvas","loadingImg","loadImg","img","complete","Aero","tools","rand","this","aero_l","w","h","aero_m","aero_s","x","y","speed","diebol","aeroObj","aeroArr","push","console","log","bol","draw","prototype","index","ctx","drawImage","splice","appid","serverPath","openid","window","innerWidth","innerHeight","canvas","document","querySelector","getContext","gameBol","shipArr","loading","rota","ship1","bgHome","jump","starsky","start","bgPlay","obj","loadedImg","len","prog","imgObj","Image","src","key","onload","Ship","moveBol","shipObj","addEventListener","ev","disx","touches","clientX","disy","clientY","obj1","crash","move","width","height","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","min","max","parseInt","Math","random","obj2","l1","r1","t1","b1","l2","r2","t2","b2"],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var global = require('./js/global');\nvar tool = require('./js/tools');\nvar load = require('./js/load');\nvar ship = require('./js/ship');\nvar aero = require('./js/aero');\n\ntool.resizeCanvas();\nload.loadingImg({loadImg:global.img, complete:init});\n\nfunction init(imgs) {\n\n    var num = global.num;//帧数\n\n    function frameFn() {\n\n        num++;\n\n        ship.createBg(num,imgs);\n\n        ship.createShip(num,imgs);\n\n        ship.shipCrashAero(imgs);\n\n\n        aero.createAero(num,imgs);\n\n        if (num > 1000) {\n            num = 0;\n        }\n        requestAnimationFrame(frameFn);\n\n        // if (global.gameBol){\n        //     // console.log(1)\n        //     window.cancelAnimationFrame(frameFn);\n        //     // return;\n        // }\n    }\n    frameFn();\n\n} //init over\n\n","var global = require('./global');\nvar tools = require('./tools');\n\n/**\n * 画陨石\n * @param num 帧数\n * @param imgs 图片对象\n */\nexports.createAero = function (num,imgs) {\n    if (num % 40 == 0) {\n        var aeroObj = new Aero(imgs);\n        global.aeroArr.push(aeroObj);\n        console.log(global.aeroArr.length)\n    }\n    for (var i = 0; i < global.aeroArr.length; i++) {\n        var bol = global.aeroArr[i].draw(i);\n        if (bol){\n            i--;\n        }\n    }\n};\n\n/**\n * 陨石类\n * @param imgs\n * @constructor 陨石类\n */\nfunction Aero(imgs) {\n    var r = tools.rand(0, 100);\n    if (r >= 0 && r <= 10) {\n        this.img = imgs.aero_l;\n        this.w = global.w/7;\n        this.h = global.w/7*1.2;\n    } else if (r > 10 && r <= 70) {\n        this.img = imgs.aero_m;\n        this.w = global.w/8;\n        this.h = global.w/8*0.70;\n    } else {\n        this.img = imgs.aero_s;\n        this.w = global.w/9;\n        this.h = global.w/9*0.90;\n    }\n    this.x = tools.rand(0,global.w-this.w);\n    this.y = -this.h;\n    this.speed = 3;\n    this.diebol = false;\n}\nAero.prototype.draw = function (index) {\n    this.y += this.speed;\n    global.ctx.drawImage(this.img, this.x, this.y, this.w, this.h);\n    if (this.y > global.h){\n        global.aeroArr.splice(index,1);\n        return true;\n    }\n    return false;\n};\n\n\n\n","module.exports = {\n    appid : 'wx61477c05fc1aa64c',\n    serverPath : 'http://www.51guess.cn/universe',//服务器路径\n    openid : '',\n\n\n    num: 0,\n    w : window.innerWidth,\n    h : window.innerHeight,\n    canvas : document.querySelector(\"#game\"),\n    ctx : document.querySelector(\"#game\").getContext(\"2d\"),\n    y : 0,\n    img : {},\n    aeroArr : [],\n    gameBol : false,\n    shipArr : [],\n};","var global = require('./global');\n\nvar a = \"resources/images/\";\nglobal.img = {\n    //加载页\n    loading:a+\"loading/loading.png\",\n\n    //通用\n    rota:a+\"common/rota.png\",\n    ship1:a+\"common/ship.png\",\n\n    //首页\n    bgHome:a+\"home/bg.png\",\n    jump:a+\"home/jump.png\",\n    starsky:a+\"home/starsky.png\",\n    start:a+\"home/start.png\",\n\n    //游戏\n    bgPlay:a+\"play/bg.jpg\",\n    ship:a+\"play/ship.png\",\n    aero_l:a+\"play/aero-l.png\",\n    aero_m:a+\"play/aero-m.png\",\n    aero_s:a+\"play/aero-s.png\"\n\n};\n\n/**\n * 加载\n * @param obj\n */\nexports.loadingImg = function (obj){\n    var loadedImg = {};\n    var len = 0;\n    for (var i in obj.loadImg){\n        len++;\n    }\n    var prog = 0;\n    for (var i in obj.loadImg){\n        var imgObj = new Image();\n        imgObj.src = obj.loadImg[i];\n        imgObj.key = i;\n        imgObj.onload = function (){\n            loadedImg[this.key] = this;\n            prog++;\n            if (prog>=len){\n                //加载完成\n                if (obj.complete){\n                    obj.complete(loadedImg);\n                }\n            }\n        }\n    }\n}","var global = require('./global');\nvar tool = require('./tools');\n\n/**\n * 画飞船\n * @param num\n * @param imgs\n */\nexports.createShip = function (num,imgs) {\n    var shipObj = new Ship(imgs);\n    shipObj.draw();\n    global.canvas.addEventListener('touchmove',function (ev) {\n        var disx = ev.touches[0].clientX;\n        var disy = ev.touches[0].clientY;\n        shipObj.x = disx;\n        shipObj.y = disy;\n        console.log(disx,disy);\n    },false)\n};\n\n/**\n * 画背景\n * @param num\n * @param imgs\n */\nexports.createBg = function (num,imgs) {\n    var n = 3.32;//背景图高与屏幕高的比\n    if (num % 2 == 0) {\n        global.y += 10;\n        if (global.y >= global.h * n) {\n            global.y = 0;\n        }\n    }\n    global.ctx.drawImage(imgs.bgPlay, 0, global.y, global.w, global.h * n);\n    global.ctx.drawImage(imgs.bgPlay, 0, global.y - global.h * n, global.w, global.h * n);\n};\n\nexports.shipCrashAero = function (imgs) {\n    for (var i=0; i<global.aeroArr.length; i++){\n        var obj1 = {x:global.aeroArr[i].x,y:global.aeroArr[i].y,w:global.aeroArr[i].w,h:global.aeroArr[i].h};\n        if (tool.crash(obj1,new Ship(imgs))){\n            global.gameBol = true;\n        }\n    }\n}\n\n/**\n * 飞船类\n * @param imgs\n * @constructor\n */\nfunction Ship(imgs) {\n    this.w = global.w/6;\n    this.h = global.w/6*2.22;\n    this.x = global.w/2-global.w*0.108;\n    this.y = global.h-this.h;\n    this.img = imgs.ship;\n    this.moveBol = true;\n}\nShip.prototype.move = function (imgs) {\n    if (this.moveBol){\n        this.img = imgs.ship;\n        this.moveBol = false;\n    }else {\n        this.img = imgs.ship; //这里的值是飞船被废后的图，记得找李凯要一张炸毁的飞船图\n        this.moveBol = true;\n    }\n};\nShip.prototype.draw = function (num) {\n    if (num%6==0){\n        this.move();\n    }\n    global.ctx.drawImage(this.img,this.x,this.y,this.w,this.h);\n};\n\n","var global = require('./global');\n\n/**\n * canvas适配，兼容\n */\nexports.resizeCanvas = function () {\n    global.canvas.width = global.w;\n    global.canvas.height = global.h;\n    window.requestAnimationFrame =\n        window.requestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.msRequestAnimationFrame;\n};\n\n/**\n * 随机数\n * @param min\n * @param max\n * @returns {Number}\n */\nexports.rand = function (min,max){\n    return parseInt(Math.random()*(max-min+1)+min);\n};\n\n/**\n * 碰撞检测\n * @param obj1\n * @param obj2\n * @returns {boolean}\n */\nexports.crash = function (obj1,obj2){\n    var l1 = obj1.x;\n    var r1 = obj1.x+obj1.w;\n    var t1 = obj1.y;\n    var b1 = obj1.y+obj1.h;\n    var l2 = obj2.x;\n    var r2 = obj2.x+obj2.w;\n    var t2 = obj2.y;\n    var b2 = obj2.y+obj2.h;\n    // if (l1<r2&&r1>l2&&t1<b2&&b1>t2){\n    //     return true;\n    // }else{\n    //     return false;\n    // }\n    var bol = l1<r2&&r1>l2&&t1<b2&&b1>t2 ? true:false;\n    return bol;\n}"]}